\chapter{ベンチマーク}
\label{chap_Results}

\section{環境}

\begin{table}[hbtp]
  \begin{center}
    \caption{実行環境}
    \begin{tabular}{cc} \hline
      Component & Type \rule[0pt]{0pt}{0pt} \\ \hline
      CPU & AMD Ryzen7 1700 (8Cores/16Threads) \rule[0pt]{0pt}{0pt} \\ 
      & Base Clock 3GHz / Max Boost Clock 3.7GHz \rule[0pt]{0pt}{0pt} \\
      & Total L1 Cache: 768KB / Total L2 Cache: 4MB / Total L3 Cache: 16MB \\
      Memory & DDR4-2666 32GB \rule[0pt]{0pt}{0pt} \\
      OS & Ubuntu 16.04 LTS \rule[0pt]{0pt}{0pt} \\
      Compiler & gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.11) \rule[0pt]{0pt}{0pt} \\ \hline
    \end{tabular}
  \end{center}
  \label{table_env}
\end{table}


例えば，Ryzen アーキテクチャにおける除算命令の実行時間は，
DIV (r64/m64) の Latency が 14--46 [clocks] であることから\citep{AgnerFog2018}，
CPU が 3.7 GHz で命令を処理している場合，
\begin{align*}
14 {\rm [clocks]} \times \frac{1}{3.7 {\rm [GHz]}}
= \frac{14}{3.7 \times 10^9} {\rm [sec]}
\simeq 3.8 \times 10^{-9} {\rm [sec]}
= 3.8 {\rm [ns]}
\end{align*}
\begin{align*}
46 {\rm [clocks]} \times \frac{1}{3.7 {\rm [GHz]}}
= \frac{46}{3.7 \times 10^9} {\rm [sec]}
\simeq 1.2 \times 10^{-8} {\rm [sec]}
= 12 {\rm [ns]}
\end{align*}
より，3.8--12 ns である．



XXXXXXXXXXX より，
google::dense\_hash\_map はスループットで 250 query/$\mu$s 程度の探査速度を持つことから，
探査１回あたりの実行時間は，
\begin{align*}
  250{\rm [query \slash \mu s]}
  = \frac{1}{250} {\rm [\mu s \slash query]}
  = \frac{10^3}{250} {\rm [ns \slash query]}
  = 4 {\rm [ns \slash query]}
\end{align*}
である．

例えば，Ryzen アーキテクチャにおける単位 clock あたりの実行時間は，
\begin{align*}
  \frac{1}{3.7 {\rm [GHz]}}
  = \frac{1}{3.7 \times 10^9}{\rm [sec]}
  = 2.7 \times 10^{-10}{\rm [sec]}
  = 2.7 \times 10^{-1}{\rm [ns/clock]}
\end{align*}
である．
したがって，google::dense\_hash\_map が探査１回に必要とする平均 clock 数は，
\begin{align*}
  \frac{ 4 {\rm [ns]} }{ 2.7 \times 10^{-1}{\rm [ns/clock]} }
  = 14.8 {\rm [clock]}
\end{align*}
である．

\section{結果}

Loadfactor

メモリ使用量

挿入

探査

削除













